language: node_js
node_js:
  - 12
branches:
  only:
    - main
services:
  - mongodb
install: npm install --save-dev
script:
  - npm run test
  - npm run linter
after_success:
  - eval "$(ssh-agent -s)"
  - chmod 600 .travis/id_rsa
  - ssh-add .travis/id_rsa
  - echo -e "Host *\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
  - cd ~
  - git clone git@github.com:WSI-Haiyaaaa/project-two.git project-two
  - cd project-two
  - git remote add live $DEPLOY_URL
  - git push live main
